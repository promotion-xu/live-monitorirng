<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Streamedian HTML5 RTSP/HLS player example</title>
    <style>
        video {
            width: 720px;
        }
    </style>
</head>

<body>
    <div>
        <button id="set_new_url">play</button>
    </div>
    <video id="face_video" autoplay>
        <source src="" type="application/x-rtsp">
    </video>
    <video id="traffic_video" autoplay>
        <source src="" type="application/x-rtsp">
    </video>
    <script src="https://cdn.bootcss.com/babel-polyfill/7.0.0-beta.2/polyfill.min.js"></script>
    <!-- <script src="polyfill.min.js"></script> -->
    <script src="./streamedian.min.js"></script>
    <script src="./protobuf.min.js"></script>
    <script src="./previewinfo_static.js"></script>


    <script>
        if (window.Streamedian) {
            var trafficWS = "ws://10.111.32.106:10080/rtsp-over-ws";
            var faceWS = "ws://10.151.3.63:10080/rtsp-over-ws";
            // var p = Streamedian.player('test_video', {
            //     socket: trafficWS
            // })

            var fplayerClient = document.getElementById('face_video')
            var fplayer = null

            var tplayerClient = document.getElementById('traffic_video')
            var tplayer = null

            var start = document.getElementById('set_new_url')
            start.onclick = function() {
                ChangeFaceVideo('rtsp://admin:Sense123789456@10.151.23.137:554');
                ChangeTrafficVideo('rtsp://10.111.32.106:3022/12t1-4-high620cm_angle70degrees_2.mp4');
            }

            function ChangeFaceVideo(src) {
                if (fplayer) {
                    fplayer.destroy();
                    fplayer = null;
                }
                fplayerClient.children[0].src = src
                fplayer = Streamedian.player('face_video', {
                    socket: faceWS
                })
            }

            function ChangeTrafficVideo(src) {
                if (tplayer) {
                    tplayer.destroy();
                    tplayer = null;
                }
                tplayerClient.children[0].src = src
                tplayer = Streamedian.player('traffic_video', {
                    socket: trafficWS
                })
            }
        }
    </script>
</body>

</html>